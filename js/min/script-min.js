function bind(){var e=Array.prototype.slice.call(arguments),n=e.shift();return e.unshift(null),n.bind.apply(n,e)}function wait(e){return new Promise(function(n,t){setTimeout(n,e)})}function makeArray(e){return void 0===e.length?[e]:[].slice.call(e)}function listenOnce(e,n,t){e.addEventListener(n,function(e){return e.target.removeEventListener(e.type,arguments.callee),t(e)})}function isVisible(e){var n=e.getBoundingClientRect();return n.top<=window.innerHeight&&n.bottom>=0}function isActive(e){var n=e.getBoundingClientRect(),t=.25*window.innerHeight;return n.top<=t&&n.bottom>=t}function setClassOnNodes(e,n,t,i){void 0===i&&(i=0),t=makeArray(t),console.log(t);var o=t.reduce(function(t,o){var r=t.then(bind(wait,i)).then(function(){n?(console.log(e,o),o.classList.add(e)):o.classList.remove(e)});return r},Promise.resolve());return o}function addClassToNodes(e,n,t){return setClassOnNodes(e,!0,n,t)}function removeClassFromNodes(e,n,t){return setClassOnNodes(e,!1,n,t)}function enterItems(e){return wait(0).then(function(){var n=e.filter(isVisible),t=e.filter(function(e){return!isVisible(e)});return e.splice(0,Number.MAX_SAFE_INTEGER),e.splice.apply(e,[0,0].concat(t)),console.log(e.length,e),n.reduce(function(e,n){return e.then(bind(addClassToNodes,"enter",n,100))},Promise.resolve())})}function animatePageLanding(){function e(e,n){n.textContent+=e}function n(n,t){var i=n.split(""),o=i.reduce(function(n,i){var o=KEYSTROKE_DELAY+Math.random()*KEYSTROKE_DELAY/3,r=n.then(bind(wait,o)).then(bind(e,i,t));return r},Promise.resolve());return o}var t=document.querySelector("#hello-world");console.log(t);var i=wait(500).then(bind(n,"Hello world",t)).then(bind(wait,750)).then(function(){var e=document.querySelector("#tyler-eich");e.classList.remove("hide")}).then(bind(wait,750)).then(function(){var e=document.querySelector("header");e.classList.remove("hide")});return i}function getLinkNode(e){return e.link}function followNav(e){var n=e.filter(function(e){return isActive(e.section)}),t=e.filter(function(e){return-1===n.indexOf(e)});removeClassFromNodes("active",t.map(getLinkNode)),addClassToNodes("active",n.map(getLinkNode))}function init(){animatePageLanding();var e=makeArray(document.querySelectorAll(".animate")),n=makeArray(document.querySelectorAll(".link")).map(function(e){var n=e.getAttribute("href"),t=document.querySelector(n);return{link:e,section:t}}),t=!1;window.addEventListener("load",bind(enterItems,e)),window.addEventListener("scroll",bind(enterItems,e)),window.addEventListener("resize",bind(enterItems,e)),window.addEventListener("load",bind(followNav,n)),window.addEventListener("scroll",bind(followNav,n)),window.addEventListener("resize",bind(followNav,n))}function setTouchClass(){var e=!("ontouchstart"in window),n=document.querySelectorAll(".no-touch");setClassOnNodes("no-touch",e,n,0)}var KEYSTROKE_DELAY=100;"complete"===document.readyState?init():window.addEventListener("load",init),"loading"!==document.readyState?setTouchClass():window.addEventListener("DOMContentLoaded",setTouchClass);